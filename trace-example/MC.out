@!@!@STARTMSG 2262:0 @!@!@
TLC2 Version 2.15 of Day Month 20?? (rev: e4cae85)
@!@!@ENDMSG 2262 @!@!@
@!@!@STARTMSG 2187:0 @!@!@
Running breadth-first search Model-Checking with fp 39 and seed -1411545940779901428 with 4 workers on 4 cores with 2132MB heap and 4790MB offheap memory [pid: 28275] (Linux 5.8.0-44-generic amd64, AdoptOpenJDK 14.0.1 x86_64, OffHeapDiskFPSet, DiskStateQueue).
@!@!@ENDMSG 2187 @!@!@
@!@!@STARTMSG 2220:0 @!@!@
Starting SANY...
@!@!@ENDMSG 2220 @!@!@
Parsing file /home/afonsonf/sandbox/reps/tese-notas/ceph/draft-tla-repo/src/paxos.toolbox/test-model/MC.tla
Parsing file /home/afonsonf/sandbox/reps/tese-notas/ceph/draft-tla-repo/src/paxos.toolbox/test-model/paxos.tla
Parsing file /home/afonsonf/sandbox/tools/tla+/plugins/org.lamport.tlatools_1.0.0.202102241744/tla2sany/StandardModules/TLC.tla
Parsing file /home/afonsonf/sandbox/tools/tla+/plugins/org.lamport.tlatools_1.0.0.202102241744/tla2sany/StandardModules/Integers.tla
Parsing file /home/afonsonf/sandbox/tools/tla+/plugins/org.lamport.tlatools_1.0.0.202102241744/tla2sany/StandardModules/FiniteSets.tla
Parsing file /home/afonsonf/sandbox/tools/tla+/plugins/org.lamport.tlatools_1.0.0.202102241744/tla2sany/StandardModules/Sequences.tla
Parsing file /home/afonsonf/sandbox/reps/tese-notas/ceph/draft-tla-repo/src/paxos.toolbox/test-model/SequencesExt.tla
Parsing file /home/afonsonf/sandbox/reps/tese-notas/ceph/draft-tla-repo/src/paxos.toolbox/test-model/FiniteSetsExt.tla
Parsing file /home/afonsonf/sandbox/tools/tla+/plugins/org.lamport.tlatools_1.0.0.202102241744/tla2sany/StandardModules/Naturals.tla
Parsing file /home/afonsonf/sandbox/reps/tese-notas/ceph/draft-tla-repo/src/paxos.toolbox/test-model/Functions.tla
Semantic processing of module Naturals
Semantic processing of module Integers
Semantic processing of module Sequences
Semantic processing of module FiniteSets
Semantic processing of module TLC
Semantic processing of module Functions
Semantic processing of module FiniteSetsExt
Semantic processing of module SequencesExt
Semantic processing of module paxos
Semantic processing of module MC
@!@!@STARTMSG 2219:0 @!@!@
SANY finished.
@!@!@ENDMSG 2219 @!@!@
@!@!@STARTMSG 2185:0 @!@!@
Starting... (2021-03-01 12:47:56)
@!@!@ENDMSG 2185 @!@!@
@!@!@STARTMSG 2189:0 @!@!@
Computing initial states...
@!@!@ENDMSG 2189 @!@!@
@!@!@STARTMSG 2190:0 @!@!@
Finished computing initial states: 1 distinct state generated at 2021-03-01 12:47:57.
@!@!@ENDMSG 2190 @!@!@
@!@!@STARTMSG 2200:0 @!@!@
Progress(34) at 2021-03-01 12:48:00: 88 729 states generated (88 729 s/min), 50 668 distinct states found (50 668 ds/min), 7 189 states left on queue.
@!@!@ENDMSG 2200 @!@!@
@!@!@STARTMSG 2110:1 @!@!@
Invariant Inv is violated.
@!@!@ENDMSG 2110 @!@!@
@!@!@STARTMSG 2121:1 @!@!@
The behavior up to this point is:
@!@!@ENDMSG 2121 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
1: <Initial predicate>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ epoch = 1
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = << >>
/\ step_x = "init"
/\ accepted_pn = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 0
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 0

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
2: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 2
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = << >>
/\ step_x = "election"
/\ accepted_pn = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 1
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 0

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
3: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_PRE_COLLECT @@ m3 :> PHASE_ELECTION)
/\ epoch = 2
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = << >>
/\ step_x = "election_recover"
/\ accepted_pn = (m1 :> 0 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 2
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 0

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
4: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_COLLECT @@ m3 :> PHASE_ELECTION)
/\ epoch = 2
/\ send_queue = (m1 :> <<>> @@ m2 :> <<<<m1, OP_COLLECT>>, <<m3, OP_COLLECT>>>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = << >>
/\ step_x = "pre_send_collect"
/\ accepted_pn = (m1 :> 0 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 3
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 0

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
5: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_COLLECT @@ m3 :> PHASE_ELECTION)
/\ epoch = 2
/\ send_queue = (m1 :> <<>> @@ m2 :> <<<<m3, OP_COLLECT>>>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 1)
/\ step_x = "send_collect"
/\ accepted_pn = (m1 :> 0 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 4
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 0

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
6: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_COLLECT @@ m3 :> PHASE_ELECTION)
/\ epoch = 2
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 1)
/\ step_x = "send_collect"
/\ accepted_pn = (m1 :> 0 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 5
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 0

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
7: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_COLLECT @@ m3 :> PHASE_ELECTION)
/\ epoch = 2
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 1 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 1)
/\ step_x = "receive collect"
/\ accepted_pn = (m1 :> 102 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 6
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 0

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
8: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_COLLECT @@ m3 :> PHASE_ELECTION)
/\ epoch = 2
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 1 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "restart mon"
/\ accepted_pn = (m1 :> 102 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 7
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
9: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_COLLECT @@ m3 :> PHASE_ELECTION)
/\ epoch = 3
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "timeout and restart"
/\ accepted_pn = (m1 :> 102 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> FALSE @@ m2 :> TRUE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 8
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
10: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_ELECTION @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "election"
/\ accepted_pn = (m1 :> 102 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 9
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
11: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_PRE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "election_recover"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 10
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 0 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
12: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m2, OP_COLLECT>>, <<m3, OP_COLLECT>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "pre_send_collect"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 11
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
13: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m3, OP_COLLECT>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_collect"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 12
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
14: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_collect"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 102 @@ m3 :> 0)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 13
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
15: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 1 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive collect"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 0)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 14
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
16: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 1 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 1 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive collect"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 15
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
17: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 1 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive last"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> 0 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 16
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> 0 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 2 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
18: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_COLLECT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive last"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_RECOVERING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> 0 @@ m3 :> 0) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 17
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> 0 @@ m3 :> 0) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
19: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m2, OP_LEASE>>, <<m3, OP_LEASE>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "post_last"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 18
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
20: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m3, OP_LEASE>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_extend_lease"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 19
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
21: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_extend_lease"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 20
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
22: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "client_request"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> << >> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 21
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
23: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m2, OP_BEGIN>>, <<m3, OP_BEGIN>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "propose_pending"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 22
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
24: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m3, OP_BEGIN>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 23
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
25: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_RECOVERING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> << >> @@ m3 :> << >>)
/\ step = 24
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
26: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> << >>)
/\ step = 25
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
27: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive accept"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_RECOVERING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> << >>)
/\ step = 26
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
28: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 27
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
29: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive accept"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 28
/\ last_committed = (m1 :> 0 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
30: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_COMMIT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m2, OP_COMMIT>>, <<m3, OP_COMMIT>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "post_accept"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_REFRESH @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 29
/\ last_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
31: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_COMMIT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m3, OP_COMMIT>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_commit"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_REFRESH @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 30
/\ last_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
32: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_COMMIT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_commit"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_REFRESH @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 31
/\ last_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
33: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m2, OP_LEASE>>, <<m3, OP_LEASE>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "finish_commit"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 32
/\ last_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
34: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m3, OP_LEASE>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_extend_lease"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 33
/\ last_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
35: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_extend_lease"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 34
/\ last_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
36: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "client_request"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 35
/\ last_committed = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
37: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 1 @@ m2 :> 0 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_LEASE @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive commit"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_ACTIVE @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 36
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
38: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 0 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m2, OP_BEGIN>>, <<m3, OP_BEGIN>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "propose_pending"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 37
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
39: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 0 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m3, OP_BEGIN>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 38
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
40: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 0 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "send_begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1>> @@ m3 :> <<v1>>)
/\ step = 39
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
41: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 2 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1, v1>> @@ m3 :> <<v1>>)
/\ step = 40
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
42: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 2 @@ m3 :> 1)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 1 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive accept"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1, v1>> @@ m3 :> <<v1>>)
/\ step = 41
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 0)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
43: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 2 @@ m3 :> 0)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 1 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive commit"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1, v1>> @@ m3 :> <<v1>>)
/\ step = 42
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> Nil)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
44: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 2 @@ m3 :> 2)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 1 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive begin"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1, v1>> @@ m3 :> <<v1, v1>>)
/\ step = 43
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
45: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 2 @@ m3 :> 2)
/\ phase = (m1 :> PHASE_BEGIN @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "receive accept"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_UPDATING @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1, v1>> @@ m3 :> <<v1, v1>>)
/\ step = 44
/\ last_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> v1 @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2217:4 @!@!@
46: <Next line 979, col 5 to line 1032, col 40 of module paxos>
/\ uncommitted_v = (m1 :> 2 @@ m2 :> 2 @@ m3 :> 2)
/\ phase = (m1 :> PHASE_COMMIT @@ m2 :> PHASE_ELECTION @@ m3 :> PHASE_ELECTION)
/\ epoch = 4
/\ send_queue = (m1 :> <<<<m2, OP_COMMIT>>, <<m3, OP_COMMIT>>>> @@ m2 :> <<>> @@ m3 :> <<>>)
/\ monitor_store = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ messages = ([last_committed |-> 0, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m2, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 1, dest |-> m3, type |-> OP_LEASE, from |-> m1] :> 1 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 0, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m2, pn |-> 201] :> 0 @@ [last_committed |-> 1, dest |-> m1, type |-> OP_ACCEPT, from |-> m3, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 0, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_COMMIT, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m2, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [values |-> <<v1, v1>>, last_committed |-> 1, dest |-> m3, type |-> OP_BEGIN, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m1, pn |-> 201] :> 0 @@ [first_committed |-> 0, last_committed |-> 0, dest |-> m3, type |-> OP_COLLECT, from |-> m2, pn |-> 102] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m2, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m1, type |-> OP_LAST, from |-> m3, pn |-> 201] :> 0 @@ [values |-> << >>, first_committed |-> 0, last_committed |-> 0, dest |-> m2, type |-> OP_LAST, from |-> m1, pn |-> 102] :> 0)
/\ step_x = "post_accept"
/\ accepted_pn = (m1 :> 201 @@ m2 :> 201 @@ m3 :> 201)
/\ isLeader = (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE)
/\ accepted = ( m1 :> (m1 :> TRUE @@ m2 :> TRUE @@ m3 :> TRUE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ state = (m1 :> STATE_REFRESH @@ m2 :> STATE_UPDATING @@ m3 :> STATE_UPDATING)
/\ first_committed = (m1 :> 1 @@ m2 :> 1 @@ m3 :> 1)
/\ peer_first_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ pending_proposal = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ values = (m1 :> <<v1, v1>> @@ m2 :> <<v1, v1>> @@ m3 :> <<v1, v1>>)
/\ step = 45
/\ last_committed = (m1 :> 2 @@ m2 :> 1 @@ m3 :> 1)
/\ acked_lease = ( m1 :> (m1 :> TRUE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m2 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) @@
  m3 :> (m1 :> FALSE @@ m2 :> FALSE @@ m3 :> FALSE) )
/\ peer_last_committed = ( m1 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m2 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) @@
  m3 :> (m1 :> -1 @@ m2 :> -1 @@ m3 :> -1) )
/\ uncommitted_value = (m1 :> v1 @@ m2 :> v1 @@ m3 :> v1)
/\ num_last = (m1 :> 3 @@ m2 :> 1 @@ m3 :> 0)
/\ new_value = (m1 :> Nil @@ m2 :> Nil @@ m3 :> Nil)
/\ number_refreshes = 1

@!@!@ENDMSG 2217 @!@!@
@!@!@STARTMSG 2200:0 @!@!@
Progress(46) at 2021-03-01 12:48:09: 1 034 036 states generated (4 447 147 s/min), 422 587 distinct states found (1 817 448 ds/min), 65 478 states left on queue.
@!@!@ENDMSG 2200 @!@!@
@!@!@STARTMSG 2199:0 @!@!@
1034036 states generated, 422587 distinct states found, 65478 states left on queue.
@!@!@ENDMSG 2199 @!@!@
@!@!@STARTMSG 2194:0 @!@!@
The depth of the complete state graph search is 46.
@!@!@ENDMSG 2194 @!@!@
@!@!@STARTMSG 2186:0 @!@!@
Finished in 13954ms at (2021-03-01 12:48:09)
@!@!@ENDMSG 2186 @!@!@
